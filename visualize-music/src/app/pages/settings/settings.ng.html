<p-card
  [style]="{
    width: '90%',
    'max-width': '500px',
    margin: 'auto',
    'margin-top': '8rem',
  }"
>
  <h1>Settings</h1>
  <form [formGroup]="formGroup" (ngSubmit)="applySettings()">
    @if (currentSettings$ | async; as currentSettings) {
      @if (windowUnitFormControl.value != "all-time") {
        <div class="form-group">
          <label for="sliding-window-duration">Sliding Window Duration:</label>
          <p-inputnumber
            [class]="
              windowDurationFormControl.errors ? 'ng-invalid ng-dirty' : ''
            "
            formControlName="windowDuration"
            [maxFractionDigits]="0"
            [(ngModel)]="currentSettings.windowDuration"
          ></p-inputnumber>
        </div>
      }
      <div class="form-group">
        <label for="sliding-window-unit">Sliding Window Unit:</label>
        <p-select
          formControlName="windowUnit"
          [options]="windowUnitOptions"
          [(ngModel)]="currentSettings.windowUnit"
          (onChange)="onWindowUnitChange($event)"
        />
      </div>
      <hr class="separator" />
      <div class="form-group">
        <label for="export-image-count">Export Image Count:</label>
        <p-inputnumber
          formControlName="exportCount"
          [maxFractionDigits]="0"
          [min]="1"
          [max]="100"
          [(ngModel)]="currentSettings.exportCount"
        ></p-inputnumber>
      </div>
    }
    <div class="form-actions">
      <p-button
        [style]="{
          'background-color': '#6c757d',
          color: 'white',
        }"
        label="Back"
        (onClick)="goBack()"
        [disabled]="isProcessing"
      ></p-button>
      <p-button
        label="Apply"
        type="submit"
        [disabled]="isProcessing"
      ></p-button>
    </div>
  </form>
</p-card>
